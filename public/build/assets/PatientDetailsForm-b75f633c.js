import{r as v,j as t,R as ee,a as g,F as Z}from"./app-8d52f51b.js";import{c as $}from"./countries-daec81e2.js";import{a as k,A as T}from"./Autocomplete-3ac3d9f4.js";import{P as te}from"./Popper-ef237435.js";import{d as ne,g as _,h as q,F as U}from"./OutlinedInput-6fe70e23.js";import{b as V}from"./Button-8cbba6d3.js";import{B as O}from"./Box-eda8d922.js";import{v as re,a0 as ae,w as L,s as A}from"./Modal-54129959.js";import{G as c}from"./Grid-227526a7.js";import{T as J}from"./Typography-117e9b47.js";import{T as b,S as K}from"./TextField-ced4731f.js";import{M as R}from"./MenuItem-0037843b.js";import{I as oe}from"./InputAdornment-f15959ad.js";import{S as le}from"./Stack-afb354de.js";import"./Close-02ebfb13.js";import"./IconButton-06508ab2.js";import"./ButtonBase-c5fb3adc.js";import"./useControlled-c0dbec42.js";import"./dividerClasses-5336fea1.js";import"./listItemTextClasses-5dc35ea7.js";function Q(e){return e.substring(2).toLowerCase()}function ie(e,d){return d.documentElement.clientWidth<e.clientX||d.documentElement.clientHeight<e.clientY}function ce(e){const{children:d,disableReactTree:u=!1,mouseEvent:m="onClick",onClickAway:s,touchEvent:p="onTouchEnd"}=e,C=v.useRef(!1),h=v.useRef(null),x=v.useRef(!1),P=v.useRef(!1);v.useEffect(()=>(setTimeout(()=>{x.current=!0},0),()=>{x.current=!1}),[]);const w=re(d.ref,h),n=ae(a=>{const i=P.current;P.current=!1;const f=L(h.current);if(!x.current||!h.current||"clientX"in a&&ie(a,f))return;if(C.current){C.current=!1;return}let S;a.composedPath?S=a.composedPath().indexOf(h.current)>-1:S=!f.documentElement.contains(a.target)||h.current.contains(a.target),!S&&(u||!i)&&s(a)}),l=a=>i=>{P.current=!0;const f=d.props[a];f&&f(i)},y={ref:w};return p!==!1&&(y[p]=l(p)),v.useEffect(()=>{if(p!==!1){const a=Q(p),i=L(h.current),f=()=>{C.current=!0};return i.addEventListener(a,n),i.addEventListener("touchmove",f),()=>{i.removeEventListener(a,n),i.removeEventListener("touchmove",f)}}},[n,p]),m!==!1&&(y[m]=l(m)),v.useEffect(()=>{if(m!==!1){const a=Q(m),i=L(h.current);return i.addEventListener(a,n),()=>{i.removeEventListener(a,n)}}},[n,m]),t(v.Fragment,{children:v.cloneElement(d,y)})}const de=A("div")(({theme:e})=>({[`& .${k.paper}`]:{boxShadow:"none",margin:0,color:"inherit",fontSize:13},[`& .${k.listbox}`]:{backgroundColor:e.palette.mode==="light"?"#fff":"#1c2128",padding:0,[`& .${k.option}`]:{minHeight:"auto",alignItems:"flex-start",padding:8,borderBottom:`1px solid  ${e.palette.mode==="light"?" #eaecef":"#30363d"}`,'&[aria-selected="true"]':{backgroundColor:"transparent"},[`&.${k.focused}, &.${k.focused}[aria-selected="true"]`]:{backgroundColor:e.palette.action.hover}}},[`&.${k.popperDisablePortal}`]:{position:"relative"}}));function se(e){const{disablePortal:d,anchorEl:u,open:m,...s}=e;return t(de,{...s})}const ue=A(te)(({theme:e})=>({border:`1px solid ${e.palette.mode==="light"?"#e1e4e8":"#30363d"}`,boxShadow:`0 8px 24px ${e.palette.mode==="light"?"rgba(149, 157, 165, 0.2)":"rgb(1, 4, 9)"}`,borderRadius:6,width:300,zIndex:e.zIndex.modal,fontSize:13,color:e.palette.mode==="light"?"#24292e":"#c9d1d9",backgroundColor:e.palette.mode==="light"?"#fff":"#1c2128"})),he=A(ne)(({theme:e})=>({padding:10,width:"100%",borderBottom:`1px solid ${e.palette.mode==="light"?"#eaecef":"#30363d"}`,"& input":{borderRadius:4,backgroundColor:e.palette.mode==="light"?"#fff":"#0d1117",padding:8,transition:e.transitions.create(["border-color","box-shadow"]),border:`1px solid ${e.palette.mode==="light"?"#eaecef":"#30363d"}`,fontSize:14,"&:focus":{boxShadow:`0px 0px 0px 3px ${e.palette.mode==="light"?"rgba(3, 102, 214, 0.3)":"rgb(12, 45, 107)"}`,borderColor:e.palette.mode==="light"?"#0366d6":"#388bfd"}}})),me=({value:e,onChange:d})=>{var w;const[u,m]=ee.useState(null);let s=$.find(n=>n.phone.length<=e.length?new RegExp(`^${n.phone}.*`).test(e+""):!1)??null;const p=n=>{m(n.currentTarget)},C=()=>{u&&u.focus(),m(null)},h=!!u,x=h?"country-label":void 0,P=(n,l,y)=>{if(n.type==="keydown"&&n.key==="Backspace"&&y==="removeOption")return;let a=e.replace((s==null?void 0:s.phone)??"",(l==null?void 0:l.phone)??"");d(a),s=l,C()};return g(Z,{children:[t(V,{disableRipple:!0,"aria-describedby":x,onClick:p,children:t("img",{loading:"lazy",src:`https://flagcdn.com/w40/${(w=s==null?void 0:s.code)==null?void 0:w.toLowerCase()}.png`,alt:""})}),t(ue,{id:x,open:h,anchorEl:u,placement:"bottom-start",children:t(ce,{onClickAway:C,children:t("div",{children:t(T,{open:!0,onClose:(n,l)=>{l==="escape"&&C()},value:s,onChange:P,disableCloseOnSelect:!0,PopperComponent:se,renderTags:()=>null,renderOption:(n,l,{selected:y})=>{var a,i;return g(O,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...n,children:[t("img",{loading:"lazy",width:"20",alt:l.label,src:`https://flagcdn.com/w20/${(a=l==null?void 0:l.code)==null?void 0:a.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${(i=l==null?void 0:l.code)==null?void 0:i.toLowerCase()}.png 2x`}),l.label]})},options:$,getOptionLabel:n=>n.label,renderInput:n=>t(he,{ref:n.InputProps.ref,inputProps:n.inputProps,autoFocus:!0})})})})})]})},Be=e=>{var h,x,P,w,n,l,y,a,i,f,S,B,W,F,z,H,N,D,M,G,j;const d=o=>{e.onChange(o.target.name,o.target.value)},u=o=>{var E;let r={...(E=e.patient)==null?void 0:E.contact,[o.target.name]:o.target.value};e.onChange("contact",r)},m=()=>{e.onSubmit()},s=(o,r)=>{e.onChange("nationality",r)},p=(o,r)=>{var I,X,Y;let E={...(I=e.patient)==null?void 0:I.contact,country:r,phone:((Y=(X=e.patient)==null?void 0:X.contact)==null?void 0:Y.phone)??"+"+(r==null?void 0:r.phone)};e.onChange("contact",E)},C=o=>{var r;return e.onChange("contact",{...e.patient,contact:{...(r=e.patient)==null?void 0:r.contact,phone:"+"+o}})};return t(Z,{children:g(c,{container:!0,spacing:2,mt:2,children:[g(c,{item:!0,xs:8,children:[t(J,{component:"h2",fontWeight:"bolder",children:"Patient Information"}),g(c,{container:!0,spacing:1.5,mt:2,children:[t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,label:"Reference ID",value:((h=e.patient)==null?void 0:h.reference_id)??"",name:"reference_id",onChange:d})}),t(c,{item:!0,xs:6,children:g(_,{fullWidth:!0,children:[t(q,{id:"consanguineousParents-label",children:"Are Parents Consanguineous ?"}),g(K,{labelId:"consanguineousParents-label",id:"consanguineousParents-select",value:((x=e.patient)==null?void 0:x.consanguineousParents)??null,name:"consanguineousParents",label:"Are Parents Consanguineous ?",error:!!e.errors.consanguineousParents,onChange:d,children:[t(R,{value:1,children:"Yes"}),t(R,{value:0,children:"No"})]}),e.errors.consanguineousParents&&t(U,{children:e.errors.consanguineousParents})]})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,error:!!e.errors.fullName,helperText:e.errors.fullName,label:"Patient Full Name",value:((P=e.patient)==null?void 0:P.fullName)??"",name:"fullName",onChange:d})}),t(c,{item:!0,xs:6,children:g(_,{fullWidth:!0,children:[t(q,{error:!!e.errors.gender,id:"gender-label",children:"Gender"}),g(K,{labelId:"gender-label",id:"gender-select",value:((w=e.patient)==null?void 0:w.gender)??null,error:!!e.errors.gender,label:"Gender",name:"gender",onChange:d,children:[t(R,{value:1,children:"Male"}),t(R,{value:0,children:"Female"}),t(R,{value:-1,children:"Unknown"})]}),t(U,{error:!!e.errors.gender,children:e.errors.gender})]})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,inputProps:{sx:{textAlign:"right",gap:".5em",alignItems:"center"}},placeholder:"",label:"Date Of Birth",error:!!e.errors.dateOfBirth,helperText:e.errors.dateOfBirth,value:((n=e.patient)==null?void 0:n.dateOfBirth)??"",name:"dateOfBirth",type:"date",onChange:d})}),t(c,{item:!0,xs:6,children:t(T,{id:"country-select",options:$,value:((l=e.patient)==null?void 0:l.nationality)??null,onChange:s,autoHighlight:!0,getOptionLabel:o=>o.label,renderOption:(o,r)=>g(O,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...o,children:[t("img",{loading:"lazy",width:"20",src:`https://flagcdn.com/w20/${r.code.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${r.code.toLowerCase()}.png 2x`,alt:""}),r.label," (",r.code,")"]}),renderInput:o=>t(b,{...o,required:!0,error:!!e.errors["nationality.code"],helperText:e.errors["nationality.code"],inputProps:{...o.inputProps,autoComplete:"new-password"},label:"nationality"})})})]}),t(J,{component:"h2",fontWeight:"bolder",sx:{mt:2},children:"Patient Contact Information"}),g(c,{container:!0,spacing:1.5,mt:2,children:[t(c,{item:!0,xs:6,children:t(T,{id:"country-select",options:$,value:(a=(y=e.patient)==null?void 0:y.contact)==null?void 0:a.country,onChange:p,autoHighlight:!0,getOptionLabel:o=>o.label,renderOption:(o,r)=>{var E,I;return g(O,{component:"li",sx:{"& > img":{mr:2,flexShrink:0}},...o,children:[t("img",{loading:"lazy",width:"20",src:`https://flagcdn.com/w20/${(E=r==null?void 0:r.code)==null?void 0:E.toLowerCase()}.png`,srcSet:`https://flagcdn.com/w40/${(I=r==null?void 0:r.code)==null?void 0:I.toLowerCase()}.png 2x`,alt:""}),r.label," (",r.code,")"]})},renderInput:o=>t(b,{...o,label:"country",inputProps:{...o.inputProps,autoComplete:"new-password"}})})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,label:"State",value:((f=(i=e.patient)==null?void 0:i.contact)==null?void 0:f.state)??"",name:"state",onChange:u})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,label:"City",value:((B=(S=e.patient)==null?void 0:S.contact)==null?void 0:B.city)??"",name:"city",onChange:u})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,label:"Address",value:((F=(W=e.patient)==null?void 0:W.contact)==null?void 0:F.address)??"",name:"address",onChange:u})}),t(c,{item:!0,xs:6,children:t(b,{InputProps:{startAdornment:t(oe,{position:"start",children:t(me,{value:((N=(H=(z=e.patient)==null?void 0:z.contact)==null?void 0:H.phone)==null?void 0:N.substring(1))??"",onChange:C})})},fullWidth:!0,label:"Phone",value:((M=(D=e.patient)==null?void 0:D.contact)==null?void 0:M.phone)??"",name:"phone",onChange:u})}),t(c,{item:!0,xs:6,children:t(b,{fullWidth:!0,label:"Email",value:(j=(G=e.patient)==null?void 0:G.contact)==null?void 0:j.email,name:"email",onChange:u})})]})]}),t(c,{item:!0,xs:12,mt:2,children:t(le,{alignItems:"flex-end",children:t(V,{variant:"contained",onClick:m,children:"Save & continue"})})})]})})};export{Be as default};
