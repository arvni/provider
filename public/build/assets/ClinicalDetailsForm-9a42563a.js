import{j as r,r as R,a as d,F as De}from"./app-468dc84b.js";import Le from"./SymptomSelector-6487ee99.js";import{e as Oe}from"./api-a48cce3e.js";import{B as Pe}from"./Box-d6830782.js";import{T as O}from"./Typography-fb8ff41b.js";import{a as we,g as ke,s as D,_ as I,u as He,c as _e,d as Fe,f as Se,e as H,h as Re,a4 as Me,a3 as Te,P as $e}from"./Modal-784d8689.js";import{c as q,d as ze,L as Be,P as Ne,g as Ue}from"./OutlinedInput-f8af1941.js";import{L as fe,a as qe}from"./ListItem-39e1e94f.js";import{L as je}from"./ListItemAvatar-816c56e6.js";import{L as Ee}from"./ListItemText-6355ef3f.js";import{I as Ae}from"./IconButton-9a3de394.js";import{k as W,c as G}from"./ButtonBase-d47d007c.js";import{G as A}from"./Grid-0f88e4d2.js";import{R as We,a as he,F as Ge}from"./RadioGroup-d78ad030.js";import{F as T}from"./FormControlLabel-6605efd8.js";import{c as Ke,a as ge,b as L,d as Ve}from"./TableRow-85886c51.js";import{T as Xe}from"./TableHead-0b8b7491.js";import{S as N}from"./Stack-6d196264.js";import{T as U}from"./TextField-f525cea2.js";import{M as Je}from"./MenuItem-95aa6b0c.js";import{D as Ye}from"./Delete-60a51ebb.js";import{C as j}from"./Checkbox-06649eb6.js";import{b as Qe}from"./Button-132598f8.js";import"./Autocomplete-1e00bf3d.js";import"./Close-e54d3ac7.js";import"./Popper-bad574ff.js";import"./useControlled-b95c8f2a.js";import"./InputAdornment-a738385f.js";import"./listItemTextClasses-d306ad49.js";import"./dividerClasses-ec13e2f8.js";const Ze=q(r("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function er(e){return we("MuiAvatar",e)}ke("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const rr=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],tr=e=>{const{classes:t,variant:a,colorDefault:n}=e;return Se({root:["root",a,n&&"colorDefault"],img:["img"],fallback:["fallback"]},er,t)},ar=D("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],a.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>I({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&I({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),or=D("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),nr=D(Ze,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function ir({crossOrigin:e,referrerPolicy:t,src:a,srcSet:n}){const[y,C]=R.useState(!1);return R.useEffect(()=>{if(!a&&!n)return;C(!1);let b=!0;const m=new Image;return m.onload=()=>{b&&C("loaded")},m.onerror=()=>{b&&C("error")},m.crossOrigin=e,m.referrerPolicy=t,m.src=a,n&&(m.srcset=n),()=>{b=!1}},[e,t,a,n]),y}const lr=R.forwardRef(function(t,a){const n=He({props:t,name:"MuiAvatar"}),{alt:y,children:C,className:b,component:m="div",imgProps:v,sizes:_,src:g,srcSet:p,variant:w="circular"}=n,x=_e(n,rr);let u=null;const f=ir(I({},v,{src:g,srcSet:p})),S=g||p,F=S&&f!=="error",k=I({},n,{colorDefault:!F,component:m,variant:w}),o=tr(k);return F?u=r(or,I({alt:y,srcSet:p,src:g,sizes:_,ownerState:k,className:o.img},v)):C!=null?u=C:S&&y?u=y[0]:u=r(nr,{ownerState:k,className:o.fallback}),r(ar,I({as:m,ownerState:k,className:Fe(o.root,b),ref:a},x,{children:u}))}),sr=lr;function cr(e){return we("MuiLinearProgress",e)}ke("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const dr=["className","color","value","valueBuffer","variant"];let M=e=>e,ye,pe,be,ve,Ce,Ie;const E=4,mr=W(ye||(ye=M`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),ur=W(pe||(pe=M`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),fr=W(be||(be=M`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),hr=e=>{const{classes:t,variant:a,color:n}=e,y={root:["root",`color${H(n)}`,a],dashed:["dashed",`dashedColor${H(n)}`],bar1:["bar",`barColor${H(n)}`,(a==="indeterminate"||a==="query")&&"bar1Indeterminate",a==="determinate"&&"bar1Determinate",a==="buffer"&&"bar1Buffer"],bar2:["bar",a!=="buffer"&&`barColor${H(n)}`,a==="buffer"&&`color${H(n)}`,(a==="indeterminate"||a==="query")&&"bar2Indeterminate",a==="buffer"&&"bar2Buffer"]};return Se(y,cr,t)},K=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Me(e.palette[t].main,.62):Te(e.palette[t].main,.5),gr=D("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`color${H(a.color)}`],t[a.variant]]}})(({ownerState:e,theme:t})=>I({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:K(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),yr=D("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.dashed,t[`dashedColor${H(a.color)}`]]}})(({ownerState:e,theme:t})=>{const a=K(t,e.color);return I({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${a} 0%, ${a} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},G(ve||(ve=M`
    animation: ${0} 3s infinite linear;
  `),fr)),pr=D("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.bar,t[`barColor${H(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&t.bar1Indeterminate,a.variant==="determinate"&&t.bar1Determinate,a.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>I({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${E}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${E}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&G(Ce||(Ce=M`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),mr)),br=D("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.bar,t[`barColor${H(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&t.bar2Indeterminate,a.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>I({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:K(t,e.color),transition:`transform .${E}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&G(Ie||(Ie=M`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),ur)),vr=R.forwardRef(function(t,a){const n=He({props:t,name:"MuiLinearProgress"}),{className:y,color:C="primary",value:b,valueBuffer:m,variant:v="indeterminate"}=n,_=_e(n,dr),g=I({},n,{color:C,variant:v}),p=hr(g),w=Re(),x={},u={bar1:{},bar2:{}};if((v==="determinate"||v==="buffer")&&b!==void 0){x["aria-valuenow"]=Math.round(b),x["aria-valuemin"]=0,x["aria-valuemax"]=100;let f=b-100;w.direction==="rtl"&&(f=-f),u.bar1.transform=`translateX(${f}%)`}if(v==="buffer"&&m!==void 0){let f=(m||0)-100;w.direction==="rtl"&&(f=-f),u.bar2.transform=`translateX(${f}%)`}return d(gr,I({className:Fe(p.root,y),ownerState:g,role:"progressbar"},x,{ref:a},_,{children:[v==="buffer"?r(yr,{className:p.dashed,ownerState:g}):null,r(pr,{className:p.bar1,ownerState:g,style:u.bar1}),v==="determinate"?null:r(br,{className:p.bar2,ownerState:g,style:u.bar2})]}))}),Cr=vr,Ir=q(r("path",{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"}),"Download"),xe=q(r("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1-8h-2V7h2v2z"}),"InfoRounded"),xr=q(r("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload"),$=({value:e,name:t,handleChange:a,error:n,helperText:y,url:C,label:b})=>{const{upload:m,progress:v,resetProgress:_}=Oe(C),[g,p]=R.useState(e??[]),w=async o=>{f(o),p(s=>[...s,...F(o.dataTransfer.files)]),await k(o.dataTransfer.files)},x=o=>{f(o)},u=o=>{f(o)},f=o=>{o.stopPropagation(),o.preventDefault()},S=async o=>{o.target.files&&(p(s=>[...s,...F(o.target.files)]),await k(o.target.files))},F=o=>{let s=[];if(o)for(let P=0;P<o.length;P++)s.push({name:o[P].name,url:""});return s},k=async o=>{for(let s=0;s<o.length;s++)try{let{data:P}=await m(o[s]),h=[...g];h[s+h.length]?h[s+h.length].url=P.url:h[s+h.length]={name:o[s].name,url:P.url},p(h),a(t,h),_()}catch(P){let h=[...g];h[s+h.length]&&(h[s+h.length].error=P.message),p(h)}};return d(Pe,{sx:{minWidth:"200px"},onDropCapture:w,onDrop:w,onDragEnter:x,onDragOver:f,onDragLeave:u,children:[b&&r(O,{children:b}),d($e,{elevation:2,sx:{display:"flex",flexDirection:"column",gap:2,alignItems:"center",justifyContent:"center",border:"1px solid",borderColor:n?"#c02d2d":"inherit",p:2},children:[r(xr,{sx:{width:"3rem",height:"3rem"}}),r(ze,{type:"file",sx:{display:"none"},id:"uploader-"+t,onChange:S}),r("label",{htmlFor:"uploader-"+t,children:r("a",{style:{cursor:"pointer",padding:"1rem",backgroundColor:"#1976d2",borderRadius:"5px",color:"white"},children:"Add Files"})}),y&&r(O,{color:n?"error":"inherit",children:y}),d(Be,{children:[g.map((o,s)=>d(fe,{children:[r(je,{children:r(sr,{children:s+1})}),r(Ee,{primary:o.name,secondary:o.error&&r(O,{color:"#f20f0f",children:o.error})}),r(qe,{children:r(Ae,{href:o.url,target:"_blank",children:r(Ir,{})})})]},s)),v?r(fe,{children:r(Cr,{value:v*100})}):null]})]})]})},Pr=["Unknown","Antenatal onset - Onset prior to birth (HP:0030674)","Congenital onset - A phenotypic abnormality that is present at birth (HP:0003577)","Neonatal onset - Onset of signs or symptoms of disease within the first 28 days of life (HP:0003623) ","Infantile onset - Onset of signs or symptoms of disease between 28 days to one year of life (HP:0003593)","Childhood onset - Onset of disease at the age of between 1 and 5 years (HP:0011463) ","Juvenile onset - Onset of signs or symptoms of disease between the age of 5 and 15 years (HP:0003621)","Adult onset - Onset of disease manifestations in adulthood, defined here as at the age of 16 years or later (HP:0003581)","Young adult onset - Onset of disease at the age of between 16 and 40 years (HP:0011462)","Middle age onset- A type of adult onset with onset of symptoms at the age of 40 to 60 years (HP:0003596)","Late onset - A type of adult onset with onset of symptoms after the age of 60 years (HP:0003584)"],z=e=>r(O,{...e,fontWeight:"900",sx:{mb:4,mt:6},children:e.children}),et=e=>{var f,S,F,k,o,s,P,h,V,X,J,Y,Q,Z,ee,re,te,ae,oe,ne,ie,le,se,ce,de,me;const t=(i,l)=>{n("affected",l)},a=i=>{var c;let l=[...((c=e==null?void 0:e.clinicalInformation)==null?void 0:c.symptoms)??[],i];n("symptoms",l)},n=(i,l)=>e.onChange(i,l),y=i=>l=>{let c=e.clinicalInformation.symptoms;c!=null&&c.length&&(c[i].value=l.target.value),n("symptoms",c)},C=i=>n(i.target.name,i.target.value),b=i=>()=>{var c;let l=[...((c=e.clinicalInformation)==null?void 0:c.symptoms)??[]];l.splice(i,1),n("symptoms",l)},m=(i,l)=>{var ue;let c={...(ue=e.clinicalInformation)==null?void 0:ue.familyHistory},B={[i.target.name]:l};i.target.name=="other"&&!l&&(B.otherHistory=""),Object.assign(c,B),n("familyHistory",c)},v=i=>{var c;let l={...(c=e.clinicalInformation)==null?void 0:c.familyHistory};Object.assign(l,{otherHistory:i.target.value}),n("familyHistory",l)},[_,g]=R.useState(null),p=i=>{g(i.currentTarget)},w=()=>{g(null)},x=!!_,u=(i,l)=>{n(i,l)};return r(De,{children:d(A,{container:!0,spacing:2,mt:2,children:[d(A,{item:!0,xs:12,children:[r(z,{children:"Specify Clinical Information"}),d(We,{row:!0,"aria-labelledby":"affected-details-label",name:"affected",value:(f=e==null?void 0:e.clinicalInformation)==null?void 0:f.affected,onChange:t,children:[r(T,{value:"0",control:r(he,{}),label:"Clinically unaffected"}),r(T,{value:"1",control:r(he,{}),label:"Affected"})]})]}),((S=e.clinicalInformation)==null?void 0:S.affected)=="1"&&d(A,{item:!0,xs:12,children:[r(z,{children:"Specify Clinical Symptoms"}),r(Le,{onSelect:a}),d(Ke,{sx:{my:2},children:[r(Xe,{sx:{background:"#e0e0e0"},children:d(ge,{children:[r(L,{children:"Symptom name"}),d(L,{children:[d(N,{direction:"row",spacing:2,alignItems:"center",children:[r("span",{children:"Age of onset"}),r(xe,{"aria-owns":x?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:p,onMouseLeave:w})]}),r(Ne,{id:"mouse-over-popover",sx:{pointerEvents:"none"},open:x,anchorEl:_,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:w,disableRestoreFocus:!0,children:r(Pe,{sx:{maxWidth:"200px"},children:r(O,{sx:{p:1},fontSize:"15px",children:"The age of onset is the age at which an individual acquires, develops, or first experiences a condition or symptoms of a disease or disorder"})})})]}),r(L,{children:"Remove"})]})}),r(Ve,{children:(k=(F=e==null?void 0:e.clinicalInformation)==null?void 0:F.symptoms)==null?void 0:k.map((i,l)=>d(ge,{children:[r(L,{children:i.name}),r(L,{children:r(U,{size:"small",select:!0,value:i.value,error:e.errors.hasOwnProperty("symptoms."+l+".value"),helperText:e.errors.hasOwnProperty("symptoms."+l+".value")?e.errors["symptoms."+l+".value"]:"",onChange:y(l),sx:{width:"300px"},placeholder:"Age of onset",children:Pr.map((c,B)=>r(Je,{value:c,children:c},B))})}),r(L,{children:r(Ae,{color:"error",onClick:b(l),children:r(Ye,{})})})]},"symptom-"+i.id))})]}),!((s=(o=e.clinicalInformation)==null?void 0:o.symptoms)!=null&&s.length)&&d(N,{direction:"row",spacing:2,sx:{width:"100%",my:8},justifyContent:"center",children:[r(xe,{color:(P=e.errors)!=null&&P.symptoms?"error":"info"}),r(O,{color:(h=e.errors)!=null&&h.symptoms?"error":"info",children:"Please document clinical symptoms for your patient to ensure the quality of the medical diagnosis"})]}),r(U,{multiline:!0,rows:3,fullWidth:!0,name:"otherSymptom",value:(V=e.clinicalInformation)==null?void 0:V.otherSymptom,onChange:C,label:"Document Symptoms not listed in the HPO catalogue"})]}),d(A,{item:!0,xs:12,children:[r(z,{children:"Document Family History"}),r(Ue,{component:"fieldset",children:d(Ge,{row:!0,children:[r(T,{value:"Family history of cancer",name:"cancer",control:r(j,{onChange:m}),label:"Family history of cancer",labelPlacement:"end",checked:(J=(X=e.clinicalInformation)==null?void 0:X.familyHistory)==null?void 0:J.cancer}),r(T,{value:"Family history of heart disease",name:"heart",control:r(j,{onChange:m}),label:"Family history of heart disease",labelPlacement:"end",checked:(Q=(Y=e.clinicalInformation)==null?void 0:Y.familyHistory)==null?void 0:Q.heart}),r(T,{value:"Other Family History",name:"other",control:r(j,{onChange:m}),checked:(ee=(Z=e.clinicalInformation)==null?void 0:Z.familyHistory)==null?void 0:ee.other,label:"Other Family History",labelPlacement:"end"})]})}),((te=(re=e.clinicalInformation)==null?void 0:re.familyHistory)==null?void 0:te.other)&&r(U,{multiline:!0,rows:3,fullWidth:!0,sx:{mt:2},value:(oe=(ae=e.clinicalInformation)==null?void 0:ae.familyHistory)==null?void 0:oe.otherHistory,onChange:v,label:"Document Symptoms not listed in the HPO catalogue"})]}),d(A,{item:!0,xs:12,children:[r(z,{children:"Additional Information (for all family members)"}),r(U,{multiline:!0,rows:3,fullWidth:!0,sx:{mt:2},value:(ne=e.clinicalInformation)==null?void 0:ne.additionalInformation,onChange:C,name:"additionalInformation",label:"Document other family history"})]}),d(A,{item:!0,xs:12,children:[r(z,{children:"Upload Supporting Documents"}),d(N,{direction:"row",gap:2,flexWrap:"wrap",children:[r($,{value:(ie=e.clinicalInformation)==null?void 0:ie.family_history_document,label:"Family History",name:"family_history_document",handleChange:u,error:e.errors.hasOwnProperty("family_history_document"),helperText:((le=e.errors)==null?void 0:le.family_history_document)??"",url:route("upload",{tag:"familyHistory",relatedClass:"Order",relatedId:e.id})}),r($,{value:(se=e.clinicalInformation)==null?void 0:se.medical_reports_document,label:"Medical Reports",name:"medical_reports_document",handleChange:u,url:route("upload",{tag:"medicalReports",relatedClass:"Order",relatedId:e.id})}),r($,{value:(ce=e.clinicalInformation)==null?void 0:ce.pedigree_document,label:"Pedigree",name:"pedigree_document",handleChange:u,url:route("upload",{tag:"pedigree",relatedClass:"Order",relatedId:e.id})}),r($,{value:(de=e.clinicalInformation)==null?void 0:de.targeted_gene_list_document,label:"Targeted Gene List",name:"targeted_gene_list_document",handleChange:u,url:route("upload",{tag:"targetedGeneList",relatedClass:"Order",relatedId:e.id})}),r($,{value:(me=e.clinicalInformation)==null?void 0:me.other_document,label:"Other",name:"other_document",handleChange:u,url:route("upload",{tag:"other",relatedClass:"Order",relatedId:e.id})})]})]}),r(A,{item:!0,xs:12,mt:2,children:r(N,{alignItems:"flex-end",children:r(Qe,{variant:"contained",onClick:e.onSubmit,children:"Save & continue"})})})]})})};export{et as default};
